# Conversational System LLM

This project is a conversational system based on large language models (LLM) with tools that allows interaction with users through text and audio. It uses FastAPI for creating endpoints, langgraph and langchain to interact with Mistral and SQLAlchemy for database management.

## Project Description

The system allows users to interact with a language model through endpoints. Users can send text messages or audio files, and the system will respond with text or audio generated by the model or tools.

## Project Structure

```
.env.example
.gitignore
docker-compose.yml
Dockerfile
entrypoint.sh
requirements.txt
.vscode/
app/
    __init__.py
    alembic.ini
    main.py
    agents/
    core/
    migrations/
    models/
    repositories/
    routers/
    schemas/
    services/
```

## Dependencies

The project dependencies are listed in the `requirements.txt` file. To install them, you can use the following command:

```sh
pip install -r requirements.txt
```

## Usage with Docker

To run the project with Docker, follow these steps:

1. Build the Docker image:

```sh
docker-compose build
```

2. Start the services:

```sh
docker-compose up
```

This will start the database and application services in Docker containers.

## Endpoints

### Chat Endpoints

- **POST /chat/audio/**: Send an audio file and receive an audio response.
  - Parameters:
    - `user_id`: User ID.
    - `conversation_id`: Conversation ID.
    - `file`: Audio file in WAV format.

- **POST /chat/text/**: Send a text message and receive a text response.
  - Parameters:
    - `chat_request`: JSON object with fields `message`, `user_id`, and `conversation_id`.

### Conversation Endpoints

- **POST /conversation/create/**: Create a new conversation.
  - Parameters:
    - `conversation`: JSON object with fields `user_id` and `title`.

### User Endpoints

- **POST /user/create/**: Create a new user.
  - Parameters:
    - `user`: JSON object with the field `username`.

## Database Configuration

The database configuration is located in the `.env` file. Make sure to configure the environment variables correctly before running the project.

## Database Migrations

Alembic is used to manage database migrations. Migration scripts are located in the `app/migrations` directory.

To apply the migrations, run the following command:
```sh
alembic upgrade head
```

## Other Services
- **STT (Speech-to-Text)**: Service to convert audio to text using the `speech_recognition` library.
- **TTS (Text-to-Speech)**: Service to convert text to audio using the `gTTS` library.
